// Module rules for Obtain Corn Hoop.
//
// Copyright (C) 2013 Damien Dart, <damiendart@pobox.com>.
// This file is distributed under the MIT licence. For more information,
// please refer to the accompanying "LICENCE" file.

@import "functions";
@import "mixins";
@import "variables";

.navigation {
  .navigation__linklist {
    list-style: none;
    margin: calculate_em($base-layout-unit / -2, $base-font-size) 0
        0 calculate_em($base-layout-unit / -2, $base-font-size);
    padding: 0;
    &:after {
      clear: both;
      content: "";
      display: table; }
    .navigation__linklist__item {
      display: inline-block;
      margin: 0 0 0 calculate_em($base-layout-unit / 2, $base-font-size);
      padding: calculate_em($base-layout-unit / 2, $base-font-size) 0 0 0;
      .navigation__linklist__item__button {
        @include colour-swap-links($post-background-colour, $post-link-colour);
        border-radius: calculate_em($base-layout-unit, $base-font-size);
        display: inline-block;
        font-weight: bold;
        padding: calculate_em($base-layout-unit / 2, $base-font-size) 
            calculate_em($base-layout-unit, $base-font-size); } }
        text-transform: uppercase;
    .navigation__linklist__item--previouslink {
      float: left; }
    .navigation__linklist__item--nextlink {
      float: right; } } }
 
.navigation--right {
	float: right; }

.postmetadata {
  background-color: $post-background-colour;
  color: $post-metadata-colour;
  padding: 0 calculate_em($base-layout-unit, $base-font-size)
      calculate_em($base-layout-unit, $base-font-size)
      calculate_em($base-layout-unit, $base-font-size);
  a {
    @include colour-swap-links($post-background-colour,
        $post-metadata-link-colour); }
  .postmetadata__metadatalist {
    @include reset-box-model;
    list-style: none;
    text-align: left;
    .postmetadata__metadatalist__item {
      font-style: italic;
      margin: 0 0 0 calculate_em($base-layout-unit, $base-font-size);
      text-indent: calculate_em($base-layout-unit * -1, $base-font-size);
      &:before {
        $icon-font-size: 12px;
        // The funky line-height is there so that icon glyphs align better
        // with adjacent text, at least in Webkit browsers.
        // TODO: Text in non-Webkit browsers.
        $icon-line-height: 28.8px;
        float: left;
        font-family: "Glyphicons Halflings";
        font-size: calculate_percentage($icon-font-size, $base-font-size);
        height: calculate_em($base-line-height, $icon-font-size);
        line-height: calculate_em($icon-line-height, $icon-font-size);
        speak: none;
        width: calculate_em($base-line-height, $icon-font-size); } }
    @each $type in (("date", "\e023"), ("notes", "\e005"),
        ("source", "\e087"), ("tags", "\e042")) {
      .postmetadata__metadatalist__item--#{nth($type, 1)} {
        &:before {
          content: "#{nth($type, 2)}"; }
        @if (nth($type, 1) == "tags") {
          .postmetadata__metadatalist__item--tags__taglist {
            display: inline;
            padding: 0;
            .postmetadata__metadatalist__item--tags__taglist__item {
              display: inline;
              &:not(:last-child):after {
                content: ", "; } } } } } } } }

.postnotes {
  background-color: $post-background-colour;
  @each $prefix in ("", "-moz-", "-webkit-") {
    #{$prefix}box-shadow: inset 0 
      calculate_em($base-layout-unit / 2, $base-font-size) 
      calculate_em($base-layout-unit / 2, $base-font-size) 
      calculate_em($base-layout-unit / -2, $base-font-size) 
      darken($post-background-colour, 30); }
  color: $post-metadata-colour;
  margin: 0 calculate_em($base-layout-unit, $base-font-size);
  padding: calculate_em($base-layout-unit / 2, $base-font-size)
      calculate_em($base-layout-unit, $base-font-size);
  a {
    @include colour-swap-links($post-background-colour, $post-metadata-colour); }
  .notes {
    @include reset-box-model;
    list-style: none;
    text-align: left;
    .note {
      margin: 0 0 0 calculate_em($base-layout-unit, $base-font-size);
      blockquote {
        display: inline;
        margin: 0; }
      .action {
        margin: 0 0 0 calculate_em($base-layout-unit * -1, $base-font-size); }
      .avatar_frame {
        float: left;
        height: calculate_em($base-line-height, $base-font-size);
        left: calculate_em($base-line-height * -1, $base-font-size);
        position: relative;
        width: calculate_em($base-line-height, $base-font-size);
        .avatar {
          margin: -8px 0 0 0; // Assume avatar images are 16 by 16.
          opacity: 0.25; // Poor man's grey tint.
          position: relative;
          top: 50%; } }
      .clear {
        display: none; } } } }

.postbody {
  background-color: $post-background-colour;
  color: $post-colour;
  padding: calculate_em($base-layout-unit, $base-font-size);
  text-align: left;
  a {
    @include colour-swap-links($post-background-colour, $post-link-colour); }
  blockquote {
    margin: calculate_em($base-line-height / 2, $base-font-size) 0 0 0;
    padding: 0 0 0 calculate_em($base-line-height, $base-font-size); }
  h1 {
    $heading-font-size: 24px;
    $heading-line-height: 36px;
    font-size: calculate_percentage($heading-font-size, $base-font-size); 
    line-height: calculate_em($heading-line-height, $heading-font-size);
    margin: 0 0 calculate_em($base-line-height / 2, $heading-font-size) 0; }
  p {
    margin: calculate_em($base-line-height / 2, $base-font-size) 0 0 0;
    &.quote-attribution {
      text-align: right;
      font-style: italic; }
    &:first-child {
      margin: 0; } }
  ol, ul {
    list-style: square;
    margin: calculate_em($base-line-height / 2, $base-font-size) 0
        0 calculate_em($base-line-height, $base-font-size);
    padding: 0;
    & > * {
      @include reset-box-model; } } }

.siteheader {
	background-color: $post-colour;
	color: $post-background-colour;
	.siteheader__container {
		margin: 0 auto;
		padding: $base-layout-unit 0;
		width: calculate_em(800px, $base-font-size);
		.siteheader__container__sitetitle {
			float: left; }
		.siteheader__container__sitenavigation {
			float: right; }
    &:after {
      clear: both;
      content: "";
      display: table; } } }

.sitetitle {
  .sitetitle__mainheader {
    $main-title-font-size: 36px;
    $main-title-line-height: 48px;
    font-size: calculate_percentage($main-title-font-size, $base-font-size);
    line-height: calculate_em($main-title-line-height, $main-title-font-size);
    margin: 0; } }

.sitesubtitle {
	.sitesubtitle__mainheader {
    $sub-title-font-size: 30px;
    $sub-title-line-height: 36px;
    font-size: calculate_percentage($sub-title-font-size, $base-font-size);
    line-height: calculate_em($sub-title-line-height, $sub-title-font-size);
    margin: 0;
    text-align: center; } }
